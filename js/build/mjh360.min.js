"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),mjh360=function(){function a(b,c){var d=this;_classCallCheck(this,a),this.viewport=b.querySelector(".vr-viewport"),this.goBackwardsInTime=b.querySelector(".vr-before"),this.goForwardsInTime=b.querySelector(".vr-after"),this.navigation=b.querySelector(".vr-nav"),this.goBackwardsInTime.addEventListener("click",function(a){return d.sceneGoToTime(a,"before")}),this.goForwardsInTime.addEventListener("click",function(a){return d.sceneGoToTime(a,"after")}),this.scenes=[],this.viewer=new Marzipano.Viewer(this.viewport),this.geometry=new Marzipano.EquirectGeometry([{width:4e3}]),this.limiter=Marzipano.RectilinearView.limit.traditional(1024,100*Math.PI/180),this.view=new Marzipano.RectilinearView({yaw:Math.PI},this.limiter);for(var e=function(){var a=c[f];a.beforeSrc=Marzipano.ImageUrlSource.fromString(a.before),a.afterSrc=Marzipano.ImageUrlSource.fromString(a.after),a.beforeScene=d.viewer.createScene({source:a.beforeSrc,geometry:d.geometry,view:d.view,pinFirstLevel:!0}),a.hasOwnProperty("after")?a.afterScene=d.viewer.createScene({source:a.afterSrc,geometry:d.geometry,view:d.view,pinFirstLevel:!0}):a.afterScene=!1,a.navButton=document.createElement("a"),a.navButton.className="nav-button";var b=document.createElement("img");b.src=a.thumb,g=d,function(b){var c=function(a){a.preventDefault(),g.sceneActivate(!1,b),this.classList.add("active")};a.navButton.addEventListener("click",c),a.navButton.addEventListener("touchstart",c)}(f),a.navButton.appendChild(b),d.navigation.appendChild(a.navButton),d.scenes.push(a),d.currentScene=0,d.currentTime="before"},f=0;f<c.length;f++){var g;e()}}return _createClass(a,[{key:"render",value:function(){return this.scenes.length<1?(console.error("There are no scenes to view."),!1):(this.navigation.classList.add("vr-nav-active"),this.scenes[0].navButton.classList.add("active"),void this.scenes[0].beforeScene.switchTo())}},{key:"sceneGoToTime",value:function(a,b){if("undefined"!=typeof a&&a&&a.preventDefault(),this.currentTime===b)return console.warn("Already on "+b+", not changing."),!1;var c=this.sceneTimeToSelector(b);return"after"===b&&this.scenes[this.currentScene][c]===!1?(this.sceneGoToTime(!1,"before"),!1):("before"===b?(this.goBackwardsInTime.classList.add("vr-button-inactive"),this.goForwardsInTime.classList.remove("vr-button-inactive")):"after"===b&&(this.goForwardsInTime.classList.add("vr-button-inactive"),this.goBackwardsInTime.classList.remove("vr-button-inactive")),this.scenes[this.currentScene][c].switchTo(),void(this.currentTime=b))}},{key:"sceneTimeToSelector",value:function(a){var b;return"before"===a?(b="beforeScene",this.goBackwardsInTime.classList.add("vr-button-inactive"),this.goForwardsInTime.classList.remove("vr-button-inactive")):"after"===a?(b="afterScene",this.goForwardsInTime.classList.add("vr-button-inactive"),this.goBackwardsInTime.classList.remove("vr-button-inactive")):b="before",b}},{key:"sceneActivate",value:function(a,b){"undefined"!=typeof a&&a&&a.preventDefault();var c=this.currentTime;return this.scenes[this.currentScene]?(this.scenes[this.currentScene].navButton.classList.remove("active"),this.currentScene=b,this.currentTime=!1,void this.sceneGoToTime(!1,c)):(console.warn("No scene found with this ID."),!1)}}]),a}();window.viewer=new mjh360(document.getElementById("vr-pano"),[{name:"Bathroom",thumb:"/img/angra.jpg",before:"/img/angra.jpg",after:"/img/angra2.jpg"},{name:"Kitchen",thumb:"/img/angra.jpg",before:"/img/angra2.jpg",after:"/img/angra.jpg"},{name:"Winning",thumb:"/img/angra.jpg",before:"/img/angra.jpg"}]),setTimeout(function(){viewer.render(),viewer.sceneGoToTime(!1,"after")},1e3);
//# sourceMappingURL=mjh360.min.js.map